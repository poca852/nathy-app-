"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[875],{2875:(dt,S,c)=>{c.r(S),c.d(S,{MainModule:()=>pt});var l=c(6895),p=c(5649),e=c(8256),w=c(6518),u=c(529),_=c(4004),Z=c(262),k=c(9646),M=c(2340),h=c(5439);let m=(()=>{class n{constructor(t){this.http=t,this.baseUrl=M.N.baseUrl}getCreditos(){const t=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/creditos`,{headers:t})}getCreditoByName(t){""===t&&(t="all");const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/buscar/creditos/${t}`,{headers:o})}getCredito(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/creditos/${t}`,{headers:o})}addCredito(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.post(`${this.baseUrl}/creditos/${t.idCliente}`,t,{headers:o}).pipe((0,_.U)(r=>r.ok),(0,Z.K)(r=>r.errors.error.msg))}addPago(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.post(`${this.baseUrl}/pagos/${t.idCredito}`,{valor:t.valor,fecha:t.fecha},{headers:o})}getPagos(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/pagos?cliente=${t}`,{headers:o})}getPago(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/pagos/${t}`,{headers:o})}updatePago(t,o){const r=(new u.WM).set("x-token",localStorage.getItem("token")||""),s=h().utc(!0).format("DD/MM/YYYY");return this.http.patch(`${this.baseUrl}/pagos/${t}`,{valor:o,fecha:s},{headers:r})}getAllPagos(){const t=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/pagos`,{headers:t})}addCliente(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.post(`${this.baseUrl}/clientes`,t,{headers:o}).pipe((0,_.U)(r=>r.ok),(0,Z.K)(r=>(0,k.of)(r.error.msg)))}getClientes(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/clientes?status=${t}`,{headers:o})}getCliente(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/clientes/${t}`,{headers:o})}getCaja(){const t=(new u.WM).set("x-token",localStorage.getItem("token")||""),o=(new u.LE).set("fecha",h().utc(!0).format("DD/MM/YYYY"));return this.http.get(`${this.baseUrl}/caja`,{headers:t,params:o})}addInversion(t,o){const r=(new u.WM).set("x-token",localStorage.getItem("token")||""),s=h().utc(!0).format("DD/MM/YYYY");return this.http.post(`${this.baseUrl}/inversiones`,{valor:t,nota:o,fecha:s},{headers:r}).pipe((0,_.U)(g=>g.ok),(0,Z.K)(g=>g.errors.error.msg))}getListaGastos(){const t=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/lista-gastos`,{headers:t}).pipe((0,_.U)(o=>o.gastos))}addGasto(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.post(`${this.baseUrl}/gastos`,t,{headers:o}).pipe((0,_.U)(r=>r.ok),(0,Z.K)(r=>r))}addRetiro(t,o){const r=(new u.WM).set("x-token",localStorage.getItem("token")||""),s=h().utc(!0).format("DD/MM/YYYY");return this.http.post(`${this.baseUrl}/retiros`,{valor:t,nota:o,fecha:s},{headers:r}).pipe((0,_.U)(g=>g.ok),(0,Z.K)(g=>g))}getRuta(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/rutas/${t}`,{headers:o})}closeRuta(t){const o=(new u.WM).set("x-token",localStorage.getItem("token")||""),r=h().utc(!0).format("DD/MM/YYYY");return this.http.patch(`${this.baseUrl}/rutas/close/${t}`,{fecha:r},{headers:o})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=c(5593),Q=c(3214),N=c(1383);function F(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"p-toolbar",6)(1,"div",7)(2,"p",8),e._uU(3),e.ALo(4,"titlecase"),e.ALo(5,"titlecase"),e.qZA()(),e.TgZ(6,"div",9)(7,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.menu=!0)}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.AsE(" ",e.lcZ(4,2,t.user.nombre)," / ",e.lcZ(5,4,t.ruta.nombre)," ")}}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.menu=!1)}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.Q6J("routerLink",t.ruta),e.xp6(1),e.hij(" ",t.nombre," ")}}let R=(()=>{class n{constructor(t,o,r){this.authService=t,this.router=o,this.mainService=r,this.itemsMenu=[]}get user(){return{...this.authService.user}}ngOnInit(){this.mainService.getRuta(this.user.ruta._id).subscribe(t=>this.ruta=t.ruta),this.itemsMenu=[{ruta:"/main/rutero",nombre:"Rutero"},{ruta:"/main/verificados",nombre:"Verificados"},{ruta:"/main/renovaciones",nombre:"Renovaciones"},{ruta:"/main/cliente-nuevo",nombre:"Cliente Nuevo"},{ruta:"/main/oficina",nombre:"Oficina"},{ruta:"/main/caja",nombre:"Caja"}]}logout(){this.authService.logout(),this.router.navigateByUrl("/auth")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.e),e.Y36(p.F0),e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],decls:8,vars:5,consts:[["class","toolbar",4,"ngIf"],[3,"visible","baseZIndex","blockScroll","visibleChange"],[1,"flex","flex-column"],["class","pointer flex align-items-center justify-content-center h-2rem font-bold text-white border-round m-2",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"pointer","flex","align-items-center","justify-content-center","h-2rem","font-bold","text-white","border-round","m-2",3,"click"],[1,"main"],[1,"toolbar"],[1,"p-toolbar-group-left"],[1,"text-layout"],[1,"p-toolbar-group-right"],["pButton","","icon","pi pi-bars",1,"btn-menu","p-button-outlined","p-button-secondary",3,"click"],[1,"pointer","flex","align-items-center","justify-content-center","h-2rem","font-bold","text-white","border-round","m-2",3,"routerLink","click"]],template:function(t,o){1&t&&(e.YNc(0,F,8,6,"p-toolbar",0),e.TgZ(1,"p-sidebar",1),e.NdJ("visibleChange",function(s){return o.menu=s}),e.TgZ(2,"div",2),e.YNc(3,G,2,2,"div",3),e.TgZ(4,"div",4),e.NdJ("click",function(){return o.logout()}),e._uU(5," Logout "),e.qZA()()(),e.TgZ(6,"div",5),e._UZ(7,"router-outlet"),e.qZA()),2&t&&(e.Q6J("ngIf",o.user&&o.ruta),e.xp6(1),e.Q6J("visible",o.menu)("baseZIndex",1e4)("blockScroll",!0),e.xp6(2),e.Q6J("ngForOf",o.itemsMenu))},dependencies:[l.sg,l.O5,p.lC,p.rH,f.Hq,Q.Y,N.o,l.rS],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}.toolbar[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;right:0;left:0;z-index:10000}.btn-menu[_ngcontent-%COMP%]{margin-right:8px!important}.main[_ngcontent-%COMP%]{margin-top:100px}"]}),n})();var v=c(7932),L=c(7579),H=c(727);class E extends H.w0{constructor(i,t){super()}schedule(i,t=0){return this}}const T={setInterval(n,i,...t){const{delegate:o}=T;return o?.setInterval?o.setInterval(n,i,...t):setInterval(n,i,...t)},clearInterval(n){const{delegate:i}=T;return(i?.clearInterval||clearInterval)(n)},delegate:void 0};var B=c(8737);const O={now:()=>(O.delegate||Date).now(),delegate:void 0};class b{constructor(i,t=b.now){this.schedulerActionCtor=i,this.now=t}schedule(i,t=0,o){return new this.schedulerActionCtor(this,i).schedule(o,t)}}b.now=O.now;const V=new class $ extends b{constructor(i,t=b.now){super(i,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(i){const{actions:t}=this;if(this._active)return void t.push(i);let o;this._active=!0;do{if(o=i.execute(i.state,i.delay))break}while(i=t.shift());if(this._active=!1,o){for(;i=t.shift();)i.unsubscribe();throw o}}}(class D extends E{constructor(i,t){super(i,t),this.scheduler=i,this.work=t,this.pending=!1}schedule(i,t=0){if(this.closed)return this;this.state=i;const o=this.id,r=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(r,o,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(i,t,o=0){return T.setInterval(i.flush.bind(i,this),o)}recycleAsyncId(i,t,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return t;T.clearInterval(t)}execute(i,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(i,t);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,t){let r,o=!1;try{this.work(i)}catch(s){o=!0,r=s||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,B.P)(o,this),null!=i&&(this.id=this.recycleAsyncId(t,i,null)),this.delay=null,super.unsubscribe()}}});var W=c(4482),X=c(5403),a=c(433),y=c(1740);let z=(()=>{class n{constructor(t){this.fb=t,this.onEnter=new e.vpe,this.onDebounce=new e.vpe,this.placeholder="",this.debouncer=new L.x,this.form=this.fb.group({termino:[""]})}ngOnInit(){this.debouncer.pipe(function K(n,i=V){return(0,W.e)((t,o)=>{let r=null,s=null,g=null;const J=()=>{if(r){r.unsubscribe(),r=null;const x=s;s=null,o.next(x)}};function ut(){const x=g+n,j=i.now();if(j<x)return r=this.schedule(void 0,x-j),void o.add(r);J()}t.subscribe((0,X.x)(o,x=>{s=x,g=i.now(),r||(r=i.schedule(ut,n),o.add(r))},()=>{J(),o.complete()},void 0,()=>{s=r=null}))})}(300)).subscribe(t=>{this.onDebounce.emit(t)})}buscar(){this.onEnter.emit(this.form.get("termino").value)}teclaPresionada(){this.debouncer.next(this.form.get("termino").value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search"]],inputs:{placeholder:"placeholder"},outputs:{onEnter:"onEnter",onDebounce:"onDebounce"},decls:5,vars:2,consts:[[1,"main"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","name","terminoform","formControlName","termino",3,"placeholder","input"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.buscar()}),e.TgZ(2,"span",2),e._UZ(3,"i",3),e.TgZ(4,"input",4),e.NdJ("input",function(){return o.teclaPresionada()}),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("placeholder",o.placeholder))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,y.o],styles:[".main[_ngcontent-%COMP%]{background-color:var(--surface-b);padding:10px;display:grid;justify-content:center;left:0;right:0;width:100%}"]}),n})();var d=c(805),A=c(403);const ee=function(n){return["/main/pago",n]};function te(n,i){if(1&n&&(e.TgZ(0,"tr",2)(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"currency"),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("routerLink",e.VKq(8,ee,t.id)),e.xp6(2),e.Oqu(e.lcZ(3,3,t.cliente.alias)),e.xp6(3),e.Oqu(e.xi3(6,5,t.saldo,"GTQ"))}}let ne=(()=>{class n{constructor(){this.creditos=[]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-credito-table"]],inputs:{creditos:"creditos"},decls:2,vars:1,consts:[["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"value"],["pTemplate","body"],[1,"pointer",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"p-table",0),e.YNc(1,te,7,10,"ng-template",1),e.qZA()),2&t&&e.Q6J("value",o.creditos)},dependencies:[p.rH,d.jx,A.iA,l.rS,l.H9]}),n})();function oe(n,i){if(1&n&&e._UZ(0,"app-credito-table",5),2&n){const t=e.oxw(2);e.Q6J("creditos",t.creditos)}}function ie(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"app-search",3),e.NdJ("onDebounce",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.sugerencias(r))}),e.qZA(),e.YNc(2,oe,1,1,"app-credito-table",4),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.creditos.length>0)}}function re(n,i){1&n&&(e.TgZ(0,"div",6),e._UZ(1,"p-progressSpinner"),e.TgZ(2,"h3",7),e._uU(3,"Espere..."),e.qZA()())}function ae(n,i){1&n&&(e.TgZ(0,"div",6)(1,"h3",7),e._uU(2,"Sin Resultados"),e.qZA()())}let se=(()=>{class n{constructor(t,o){this.mainService=t,this.router=o,this.hayError=!1,this.creditos=[],this.hoy=h().utc(!0).format("DD/MM/YYYY"),this.loading=!1}ngOnInit(){this.loading=!0,this.mainService.getCreditos().subscribe(t=>{this.creditos=this.creditosVerificados(t.creditos),this.loading=!1})}creditosVerificados(t){let o=[];return t.forEach(r=>{r.ultimo_pago.includes(this.hoy)&&r.ultimo_pago||o.unshift(r)}),o}goTo(t){this.router.navigateByUrl(`/main/${t}`)}sugerencias(t){this.hayError=!1,this.mainService.getCreditoByName(t).subscribe(o=>{o.creditos.length>0?this.creditos=this.creditosVerificados(o.creditos):(this.creditos=[],this.hayError=!0)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-rutero"]],decls:3,vars:3,consts:[["class","card",4,"ngIf"],["class","loading flex flex-column justify-content-center",4,"ngIf"],[1,"card"],["placeholder","Buscar Cliente",3,"onDebounce"],[3,"creditos",4,"ngIf"],[3,"creditos"],[1,"loading","flex","flex-column","justify-content-center"],[1,"text-layout"]],template:function(t,o){1&t&&(e.YNc(0,ie,3,1,"div",0),e.YNc(1,re,4,0,"div",1),e.YNc(2,ae,3,0,"div",1)),2&t&&(e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",o.hayError))},dependencies:[l.O5,v.G,z,ne]}),n})();var ce=c(4247);const le=function(n){return["/main/renovar",n]};function pe(n,i){if(1&n&&(e.TgZ(0,"p-card")(1,"div",3)(2,"div",4)(3,"h3"),e._uU(4),e.qZA()(),e.TgZ(5,"div",4),e._UZ(6,"button",5),e.qZA()()()),2&n){const t=i.$implicit;e.xp6(4),e.Oqu(t.nombre),e.xp6(2),e.Q6J("routerLink",e.VKq(2,le,t.id))}}function ue(n,i){1&n&&(e.TgZ(0,"h1"),e._uU(1,"Cargando.."),e.qZA())}let de=(()=>{class n{constructor(t){this.mainService=t}ngOnInit(){this.mainService.getClientes(!1).subscribe(t=>{this.clientes=t.clientes})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-renovaciones"]],decls:4,vars:1,consts:[[1,"main","flex","flex-column","justify-content-center","card-container","blue-container","gap-3"],[4,"ngFor","ngForOf"],["divTemplate",""],[1,"flex","flex-row","justify-content-between","align-content-center"],[1,"flex","align-items-center"],["type","button","pButton","","pRipple","","icon","pi pi-dollar",1,"p-button-text","p-button-success",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,pe,7,4,"p-card",1),e.qZA(),e.YNc(2,ue,2,0,"ng-template",null,2,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.clientes))},dependencies:[l.sg,p.rH,f.Hq,ce.Z],styles:[".main[_ngcontent-%COMP%]{margin-top:60px}"]}),n})();var me=c(5226),Y=c.n(me);function ge(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e._UZ(2,"button",4),e.TgZ(3,"h2",5),e._uU(4,"Nuevo Cliente"),e.qZA()(),e.TgZ(5,"form",6),e.NdJ("submit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.guardar())}),e.TgZ(6,"div",7),e._UZ(7,"input",8)(8,"input",9)(9,"input",10)(10,"input",11)(11,"input",12)(12,"input",13),e.TgZ(13,"div",14),e._UZ(14,"button",15),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("formGroup",t.formCliente),e.xp6(9),e.Q6J("disabled",t.loading)}}function fe(n,i){1&n&&(e.TgZ(0,"div",16),e._UZ(1,"p-progressSpinner"),e.qZA())}let he=(()=>{class n{constructor(t,o,r){this.mainService=t,this.router=o,this.fb=r,this.loading=!1,this.formCliente=this.fb.group({dpi:["",[a.kI.required]],nombre:["",[a.kI.required]],alias:["",[a.kI.required]],ciudad:["",[a.kI.required]],direccion:["",[a.kI.required]],telefono:["",[a.kI.required]]})}ngOnInit(){}guardar(){this.loading=!0,this.formCliente.valid?this.mainService.addCliente(this.formCliente.value).subscribe(t=>{!0===t?(this.loading=!1,this.router.navigateByUrl("/main/renovaciones")):(Y().fire("Error",t,"error"),this.loading=!1)}):(Y().fire("Error","Por favor completa el formulario","error"),this.loading=!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.F0),e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cliente-nuevo"]],decls:2,vars:2,consts:[["class","main flex flex-column",4,"ngIf"],["class","loading",4,"ngIf"],[1,"main","flex","flex-column"],[1,"header","flex","flex-row","align-items-center","justify-content-between"],["pButton","","icon","pi pi-arrow-left","routerLink","/main/rutero",1,"p-button-text","p-button-secondary"],[1,"text-layout"],["autocomplete","off",1,"card",3,"formGroup","submit"],[1,"flex","flex-column","justify-content-center","gap-2"],["type","text","pInputText","","placeholder","Dpi","formControlName","dpi"],["type","text","pInputText","","placeholder","Nombre","formControlName","nombre"],["type","text","pInputText","","placeholder","Alias","formControlName","alias"],["type","text","pInputText","","formControlName","ciudad","placeholder","Ciudad"],["type","text","pInputText","","formControlName","direccion","placeholder","Direccion"],["type","text","pInputText","","formControlName","telefono","placeholder","Telefono"],[1,"flex","justify-content-center"],["pButton","","label","Guardar","type","submit",1,"col-12",3,"disabled"],[1,"loading"]],template:function(t,o){1&t&&(e.YNc(0,ge,15,2,"div",0),e.YNc(1,fe,2,0,"div",1)),2&t&&(e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[l.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,p.rH,y.o,f.Hq,v.G],encapsulation:2}),n})();var q=c(3900),ve=c(613),P=c(2210);function _e(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div"),e._UZ(2,"p-dropdown",2),e.qZA(),e.TgZ(3,"div")(4,"button",3),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.pagar())}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("options",t.pago)("formControl",t.pagoSeleccionado),e.xp6(2),e.Q6J("disabled",t.loading)}}let xe=(()=>{class n{constructor(t,o,r){this.fb=t,this.mainService=o,this.router=r,this.loading=!1,this.pagoSeleccionado=this.fb.control(null,a.kI.required),this.pago=[]}ngOnInit(){this.pago=this.buildPago(this.credito.total_cuotas,this.credito.valor_cuota),this.pagoSeleccionado.reset(this.credito.valor_cuota)}buildPago(t,o){let r=[];for(let s=0;s<t;s++)r.push({cuotas:s+1,valor:o*(s+1)});return r}pagar(){this.loading=!0;const t={idCredito:this.credito.id,valor:this.pagoSeleccionado.value,fecha:h().utc(!0).format("DD/MM/YYYY hh:mm a")};this.mainService.addPago(t).subscribe(o=>{o.ok&&(this.router.navigateByUrl("/main"),this.loading=!1),this.loading=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(m),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pago-fijo"]],inputs:{credito:"credito"},decls:1,vars:1,consts:[["class","flex flex-row justify-content-center",4,"ngIf"],[1,"flex","flex-row","justify-content-center"],["optionValue","valor","optionLabel","cuotas",3,"options","formControl"],["pButton","","label","Pagar",3,"disabled","click"]],template:function(t,o){1&t&&e.YNc(0,_e,5,3,"div",0),2&t&&e.Q6J("ngIf",o.credito)},dependencies:[l.O5,a.JJ,a.oH,f.Hq,P.Lt]}),n})();function Ze(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e._UZ(1,"input",2),e.TgZ(2,"button",3),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.pagar())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formControl",t.pago)("min",1),e.xp6(1),e.Q6J("disabled",t.loading)}}let be=(()=>{class n{constructor(t,o,r){this.fb=t,this.mainService=o,this.router=r,this.pago=this.fb.control(null,[a.kI.required,a.kI.min(1)]),this.loading=!1}ngOnInit(){}pagar(){if(this.pago.valid){this.loading=!0;const t={idCredito:this.credito.id,valor:this.pago.value,fecha:h().utc(!0).format("DD/MM/YYYY HH:mm a")};this.mainService.addPago(t).subscribe(o=>{o.ok&&(this.router.navigateByUrl("/main"),this.loading=!1),this.loading=!1})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(m),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pago-variable"]],inputs:{credito:"credito"},decls:1,vars:1,consts:[["class","flex flex-row align-items-center justify-content-center gap-2",4,"ngIf"],[1,"flex","flex-row","align-items-center","justify-content-center","gap-2"],["type","number","placeholder","Ingresa el pago","pInputText","",3,"formControl","min"],["pButton","","label","Pagar",3,"disabled","click"]],template:function(t,o){1&t&&e.YNc(0,Ze,3,3,"div",0),2&t&&e.Q6J("ngIf",o.credito)},dependencies:[l.O5,a.Fj,a.wV,a.JJ,a.qQ,a.oH,y.o,f.Hq],styles:["@media (max-width: 960px){div[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap}div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]}),n})();function Ce(n,i){if(1&n&&(e.TgZ(0,"div",8)(1,"div",6),e._uU(2,"Observaciones"),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(t.credito.notas)}}function Te(n,i){if(1&n&&e._UZ(0,"app-pago-fijo",24),2&n){const t=e.oxw(2);e.Q6J("credito",t.credito)}}function ye(n,i){if(1&n&&e._UZ(0,"app-pago-variable",24),2&n){const t=e.oxw(2);e.Q6J("credito",t.credito)}}function Ae(n,i){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Fecha"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Valor"),e.qZA()())}function qe(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.fecha),e.xp6(2),e.Oqu(e.xi3(5,2,t.valor,"GTQ"))}}function Ue(n,i){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h3"),e._uU(5),e.ALo(6,"titlecase"),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"button",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",5),e._UZ(11,"hr"),e.qZA()(),e.TgZ(12,"div",9)(13,"div",8)(14,"div",6),e._uU(15,"Prestado"),e.qZA(),e.TgZ(16,"div",5),e._uU(17),e.ALo(18,"currency"),e.qZA()(),e.TgZ(19,"div",8)(20,"div",6),e._uU(21,"Total a Pagar"),e.qZA(),e.TgZ(22,"div",5),e._uU(23),e.ALo(24,"currency"),e.qZA()(),e.TgZ(25,"div",8)(26,"div",6),e._uU(27,"Abonos"),e.qZA(),e.TgZ(28,"div",5),e._uU(29),e.ALo(30,"currency"),e.qZA()(),e.TgZ(31,"div",8)(32,"div",6),e._uU(33,"Saldo"),e.qZA(),e.TgZ(34,"div",5),e._uU(35),e.ALo(36,"currency"),e.qZA()(),e.TgZ(37,"div",8)(38,"div",6),e._uU(39,"Fecha"),e.qZA(),e.TgZ(40,"div",5),e._uU(41),e.qZA()(),e.TgZ(42,"div",8)(43,"div",6),e._uU(44,"Valor Cuota"),e.qZA(),e.TgZ(45,"div",5),e._uU(46),e.ALo(47,"currency"),e.qZA()(),e.TgZ(48,"div",8)(49,"div",6),e._uU(50,"Cuotas Pendientes"),e.qZA(),e.TgZ(51,"div",5),e._uU(52),e.ALo(53,"number"),e.qZA()(),e.YNc(54,Ce,5,1,"div",10),e.qZA(),e.TgZ(55,"div",11)(56,"div",8)(57,"div",5),e._uU(58,"Pago:"),e.qZA(),e.TgZ(59,"div",5)(60,"div",12),e._UZ(61,"p-radioButton",13),e.TgZ(62,"label",14),e._uU(63,"Fijo"),e.qZA()()(),e.TgZ(64,"div",5)(65,"div",12),e._UZ(66,"p-radioButton",15),e.TgZ(67,"label",16),e._uU(68,"Variable"),e.qZA()()()(),e.TgZ(69,"div"),e.YNc(70,Te,1,1,"app-pago-fijo",17),e.YNc(71,ye,1,1,"app-pago-variable",17),e.qZA()(),e.TgZ(72,"div",18)(73,"div",19)(74,"h3"),e._uU(75,"Historial"),e.qZA(),e._UZ(76,"hr"),e.qZA(),e.TgZ(77,"div",20)(78,"p-table",21),e.YNc(79,Ae,5,0,"ng-template",22),e.YNc(80,qe,6,5,"ng-template",23),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,14,t.credito.cliente.nombre)),e.xp6(12),e.Oqu(e.xi3(18,16,t.credito.valor_credito,"GTQ")),e.xp6(6),e.Oqu(e.xi3(24,19,t.credito.total_pagar,"GTQ")),e.xp6(6),e.Oqu(e.xi3(30,22,t.credito.abonos,"GTQ")),e.xp6(6),e.Oqu(e.xi3(36,25,t.credito.saldo,"GTQ")),e.xp6(6),e.Oqu(t.credito.fecha_inicio),e.xp6(5),e.Oqu(e.xi3(47,28,t.credito.valor_cuota,"GTQ")),e.xp6(6),e.Oqu(e.xi3(53,31,t.credito.saldo/t.credito.valor_cuota,"1.2-2")),e.xp6(2),e.Q6J("ngIf",t.credito.notas),e.xp6(7),e.Q6J("formControl",t.pagoSeleccionado),e.xp6(5),e.Q6J("formControl",t.pagoSeleccionado),e.xp6(4),e.Q6J("ngIf","fijo"===t.pagoSeleccionado.value),e.xp6(1),e.Q6J("ngIf","variable"===t.pagoSeleccionado.value),e.xp6(7),e.Q6J("value",t.credito.pagos)}}function Ie(n,i){1&n&&(e.TgZ(0,"div",25),e._UZ(1,"p-progressSpinner"),e.qZA())}let Ye=(()=>{class n{constructor(t,o,r,s){this.activatedRoute=t,this.mainService=o,this.fb=r,this.router=s,this.loading=!1,this.pagoSeleccionado=this.fb.control(""),this.formaPago=[{name:"fijo",key:"A"},{name:"variable",key:"b"}]}ngOnInit(){this.activatedRoute.params.pipe((0,q.w)(({id:t})=>this.mainService.getCredito(t))).subscribe(({credito:t})=>{this.credito=t}),this.pagoSeleccionado.reset("fijo")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.gz),e.Y36(m),e.Y36(a.qu),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pago"]],decls:3,vars:2,consts:[["class","main card text-layout p-3",4,"ngIf","ngIfElse"],["loading",""],[1,"main","card","text-layout","p-3"],[1,"card-container","overflow-hidden","flex","flex-column","gap-1","justify-content-center"],[1,"header","grid","flex","align-items-center"],[1,"col"],[1,"col","flex","justify-content-end"],["pButton","","icon","pi pi-arrow-left","label","Volver","routerLink","['/main/rutero']",1,"p-button-danger","p-button-sm","p-button-outlined"],[1,"grid"],[1,"info"],["class","grid",4,"ngIf"],[1,"footer","mt-2"],[1,"field-radiobutton"],["name","tipopago","value","fijo","inputId","fijo",3,"formControl"],["for","fijo"],["name","tipopago","value","variable","inputId","variable",3,"formControl"],["for","variable"],[3,"credito",4,"ngIf"],[1,"historial","mt-3"],[1,"title"],[1,"table"],["responsiveLayout","scroll","styleClass","p-datatable-striped",3,"value"],["pTemplate","header"],["pTemplate","body"],[3,"credito"],[1,"loading"]],template:function(t,o){if(1&t&&(e.YNc(0,Ue,81,34,"div",0),e.YNc(1,Ie,2,0,"ng-template",null,1,e.W1O)),2&t){const r=e.MAs(2);e.Q6J("ngIf",o.credito)("ngIfElse",r)}},dependencies:[l.O5,a.JJ,a.oH,p.rH,f.Hq,d.jx,ve.EU,A.iA,v.G,xe,be,l.JJ,l.rS,l.H9],styles:[".main[_ngcontent-%COMP%]{background-color:#1f2d40}"]}),n})(),Se=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-oficina"]],decls:9,vars:0,consts:[[1,"main","text-layout"],[1,"grid"],["routerLink","/main/oficina/inversiones","routerLinkActive","active",1,"col","flex","justify-content-center","flex-wrap","border-white","border-500","surface-overlay"],[1,"pi","pi-chart-line","tet-layout"],["routerLink","/main/oficina/gastos","routerLinkActive","active",1,"col","flex","justify-content-center","border-white","border-500","surface-overlay"],[1,"pi","pi-wallet"],["routerLink","/main/oficina/retiros","routerLinkActive","active",1,"col","flex","justify-content-center","border-white","border-500","surface-overlay"],[1,"pi","pi-send"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"div",4),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"div",6),e._UZ(7,"i",7),e.qZA()(),e._UZ(8,"router-outlet"),e.qZA())},dependencies:[p.lC,p.rH,p.Od],styles:[".main[_ngcontent-%COMP%]{margin-top:60px}.active[_ngcontent-%COMP%]{color:#ff0}"]}),n})(),we=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-credito"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"credito works!"),e.qZA())}}),n})();function Oe(n,i){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Fecha"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"valor"),e.qZA()())}function Pe(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.fecha),e.xp6(2),e.Oqu(e.xi3(5,2,t.valor,"GTQ"))}}let Je=(()=>{class n{constructor(t){this.mainService=t,this.id="",this.pagos=[]}ngOnInit(){this.mainService.getPagos(this.id).subscribe(t=>{t.ok&&(this.pagos=t.pagos)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-historial-pagos"]],inputs:{id:"id"},decls:3,vars:1,consts:[["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"]],template:function(t,o){1&t&&(e.TgZ(0,"p-table",0),e.YNc(1,Oe,5,0,"ng-template",1),e.YNc(2,Pe,6,5,"ng-template",2),e.qZA()),2&t&&e.Q6J("value",o.pagos)},dependencies:[d.jx,A.iA,l.H9]}),n})();function je(n,i){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),e._uU(4),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._uU(8,"Alias"),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA()(),e.TgZ(11,"div",5)(12,"div",6),e._uU(13,"Direccion"),e.qZA(),e.TgZ(14,"div",6),e._uU(15),e.qZA()(),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Telefono"),e.qZA(),e.TgZ(19,"div",6),e._uU(20),e.qZA()(),e.TgZ(21,"div",5)(22,"div",6),e._uU(23,"Dpi"),e.qZA(),e.TgZ(24,"div",6),e._uU(25),e.qZA()(),e._UZ(26,"hr"),e.TgZ(27,"div",7)(28,"h3"),e._uU(29,"Historial de pagos"),e.qZA(),e._UZ(30,"app-historial-pagos",8),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.cliente.nombre),e.xp6(6),e.Oqu(t.cliente.alias),e.xp6(5),e.Oqu(t.cliente.direccion),e.xp6(5),e.Oqu(t.cliente.telefono),e.xp6(5),e.Oqu(t.cliente.dpi),e.xp6(5),e.Q6J("id",t.cliente.id)}}let ke=(()=>{class n{constructor(t,o,r){this.mainService=t,this.router=o,this.activatedRouter=r}ngOnInit(){this.activatedRouter.params.pipe((0,q.w)(({id:t})=>this.mainService.getCliente(t)),(0,_.U)(t=>t.cliente)).subscribe(t=>this.cliente=t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.F0),e.Y36(p.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cliente"]],decls:1,vars:1,consts:[["class","main",4,"ngIf"],[1,"main"],[1,"card","flex","flex-column","gap-1"],[1,"titel"],[1,"body"],[1,"grid"],[1,"col"],[1,"gri"],[3,"id"]],template:function(t,o){1&t&&e.YNc(0,je,31,6,"div",0),2&t&&e.Q6J("ngIf",o.cliente)},dependencies:[l.O5,Je],styles:[".main[_ngcontent-%COMP%]{margin-top:60px}"]}),n})();var C=c(369);function Me(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),e._uU(4,"Fecha: "),e.qZA(),e.TgZ(5,"div",6),e._uU(6),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5),e._uU(9,"Base: "),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.ALo(12,"currency"),e.qZA()(),e.TgZ(13,"div",4)(14,"div",5),e._uU(15,"Inversion: "),e.qZA(),e.TgZ(16,"div",6),e._uU(17),e.ALo(18,"currency"),e.qZA()(),e.TgZ(19,"div",4)(20,"div",5),e._uU(21,"Retiro: "),e.qZA(),e.TgZ(22,"div",6),e._uU(23),e.ALo(24,"currency"),e.qZA()(),e.TgZ(25,"div",4)(26,"div",5),e._uU(27,"Gastos: "),e.qZA(),e.TgZ(28,"div",6),e._uU(29),e.ALo(30,"currency"),e.qZA()(),e.TgZ(31,"div",4)(32,"div",5),e._uU(33,"Pretendido: "),e.qZA(),e.TgZ(34,"div",6),e._uU(35),e.ALo(36,"currency"),e.qZA()(),e.TgZ(37,"div",4)(38,"div",5),e._uU(39,"Cobro: "),e.qZA(),e.TgZ(40,"div",6),e._uU(41),e.ALo(42,"currency"),e.qZA()(),e.TgZ(43,"div",4)(44,"div",5),e._uU(45,"Prestamo: "),e.qZA(),e.TgZ(46,"div",6),e._uU(47),e.ALo(48,"currency"),e.qZA()(),e.TgZ(49,"div",4)(50,"div",5),e._uU(51,"Clientes: "),e.qZA(),e.TgZ(52,"div",6),e._uU(53),e.qZA()(),e.TgZ(54,"div",4)(55,"div",5),e._uU(56,"Clientes Pendientes: "),e.qZA(),e.TgZ(57,"div",6),e._uU(58),e.qZA()(),e.TgZ(59,"div",4)(60,"div",5),e._uU(61,"Renovaciones: "),e.qZA(),e.TgZ(62,"div",6),e._uU(63),e.qZA()(),e.TgZ(64,"div",4)(65,"div",5),e._uU(66,"Efectividad: "),e.qZA(),e.TgZ(67,"div",6),e._uU(68),e.ALo(69,"number"),e.qZA()(),e.TgZ(70,"div",4)(71,"div",5),e._uU(72,"Caja final: "),e.qZA(),e.TgZ(73,"div",6),e._uU(74),e.ALo(75,"currency"),e.qZA()(),e.TgZ(76,"div",7)(77,"button",8),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(r))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.caja.fecha),e.xp6(5),e.Oqu(e.xi3(12,13,t.caja.base,"GTQ")),e.xp6(6),e.Oqu(e.xi3(18,16,t.caja.inversion,"GTQ")),e.xp6(6),e.Oqu(e.xi3(24,19,t.caja.retiro,"GTQ")),e.xp6(6),e.Oqu(e.xi3(30,22,t.caja.gasto,"GTQ")),e.xp6(6),e.Oqu(e.xi3(36,25,t.caja.pretendido,"GTQ")),e.xp6(6),e.Oqu(e.xi3(42,28,t.caja.cobro,"GTQ")),e.xp6(6),e.Oqu(e.xi3(48,31,t.caja.prestamo,"GTQ")),e.xp6(6),e.Oqu(t.caja.total_clientes),e.xp6(5),e.Oqu(t.caja.clientes_pendientes),e.xp6(5),e.Oqu(t.caja.renovaciones),e.xp6(5),e.hij("",e.xi3(69,34,100*t.caja.cobro/t.caja.pretendido,"1.2-2")," %"),e.xp6(6),e.Oqu(e.xi3(75,37,t.caja.caja_final,"GTQ"))}}function Qe(n,i){1&n&&(e.TgZ(0,"div",9),e._UZ(1,"p-progressSpinner"),e.qZA())}let Ne=(()=>{class n{constructor(t,o,r,s,g){this.mainService=t,this.router=o,this.confirmationService=r,this.messageService=s,this.authService=g}ngOnInit(){this.mainService.getCaja().subscribe(t=>{this.caja=t.caja})}cerrarRuta(){this.mainService.closeRuta(this.caja.ruta._id).subscribe(t=>{!0===t.ok?(this.authService.logout(),this.router.navigateByUrl("/auth")):Y().fire("Error","La ruta no se puede cerrar hable con el administrador","error")})}confirm(t){this.confirmationService.confirm({target:t.target,message:"Estas seguro?!!",icon:"pi pi-exclamation-triangle",accept:()=>{this.cerrarRuta()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.F0),e.Y36(d.YP),e.Y36(d.ez),e.Y36(w.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-caja"]],features:[e._Bn([d.YP,d.ez])],decls:4,vars:2,consts:[["class","main text-layout",4,"ngIf","ngIfElse"],["loading",""],[1,"main","text-layout"],[1,"flex","flex-column","justify-content-center"],[1,"grid"],[1,"col","flex","justify-content-end"],[1,"col"],[1,"grid","mt-2"],["pButton","","label","Cerrar Ruta",1,"col",3,"click"],[1,"loading"]],template:function(t,o){if(1&t&&(e.YNc(0,Me,78,40,"div",0),e._UZ(1,"p-confirmPopup"),e.YNc(2,Qe,2,0,"ng-template",null,1,e.W1O)),2&t){const r=e.MAs(3);e.Q6J("ngIf",o.caja)("ngIfElse",r)}},dependencies:[l.O5,f.Hq,C.P,v.G,l.JJ,l.H9],styles:[".main[_ngcontent-%COMP%]{margin-top:60px}"]}),n})();function Fe(n,i){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Cliente"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Abono"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Saldo"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"C. Pendientes"),e.qZA()())}const Ge=function(n){return["/main/pago/editar",n]};function Re(n,i){if(1&n&&(e.TgZ(0,"tr",5)(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA()()),2&n){const t=i.$implicit;e.Q6J("routerLink",e.VKq(16,Ge,t.id)),e.xp6(2),e.Oqu(e.lcZ(3,5,t.cliente.alias)),e.xp6(3),e.Oqu(e.xi3(6,7,t.valor,"GTQ")),e.xp6(3),e.Oqu(e.xi3(9,10,t.credito.saldo,"GTQ")),e.xp6(3),e.Oqu(e.xi3(12,13,t.credito.saldo/t.credito.valor_cuota,"1.2-2"))}}function Le(n,i){if(1&n&&(e.TgZ(0,"p-table",2),e.YNc(1,Fe,9,0,"ng-template",3),e.YNc(2,Re,13,18,"ng-template",4),e.qZA()),2&n){const t=e.oxw();e.Q6J("value",t.pagos)}}function He(n,i){1&n&&(e.TgZ(0,"div",6),e._UZ(1,"p-progressSpinner"),e.TgZ(2,"h3",7),e._uU(3,"Espera..."),e.qZA()())}let Ee=(()=>{class n{constructor(t){this.mainService=t,this.pagos=[],this.hoy=h().utc(!0).format("DD/MM/YYYY"),this.loading=!1}ngOnInit(){this.loading=!0,this.mainService.getAllPagos().subscribe(t=>{this.loading=!1,this.pagos=t.pagos})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-verificados"]],decls:2,vars:2,consts:[["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"value",4,"ngIf"],["class","loading",4,"ngIf"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[3,"routerLink"],[1,"loading"],[1,"text-layout"]],template:function(t,o){1&t&&(e.YNc(0,Le,3,1,"p-table",0),e.YNc(1,He,4,0,"div",1)),2&t&&(e.Q6J("ngIf",o.pagos.length>0),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[l.O5,p.rH,d.jx,A.iA,v.G,l.JJ,l.rS,l.H9]}),n})();var U=c(3054);function Be(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e._UZ(2,"button",4),e.TgZ(3,"h3"),e._uU(4),e.ALo(5,"titlecase"),e.ALo(6,"titlecase"),e.qZA()(),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(r))}),e.TgZ(8,"div",6),e._UZ(9,"input",7),e.TgZ(10,"div",8),e._UZ(11,"input",9)(12,"input",10),e.qZA(),e._UZ(13,"input",11),e.TgZ(14,"div",12),e._UZ(15,"button",13),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.AsE("Renovando a ",e.lcZ(5,7,null==t.cliente?null:t.cliente.nombre),"(",e.lcZ(6,9,t.cliente.alias),") "),e.xp6(3),e.Q6J("formGroup",t.creditoForm),e.xp6(2),e.Q6J("min",1),e.xp6(2),e.Q6J("min",0),e.xp6(1),e.Q6J("min",1),e.xp6(3),e.Q6J("disabled",t.creditoForm.invalid)}}function De(n,i){1&n&&(e.TgZ(0,"div",14),e._UZ(1,"p-progressSpinner"),e.qZA())}let $e=(()=>{class n{constructor(t,o,r,s,g){this.mainService=t,this.router=o,this.aR=r,this.fb=s,this.confirmationService=g,this.loading=!0,this.creditoForm=this.fb.group({valor_credito:[null,[a.kI.required,a.kI.min(1)]],interes:[null,[a.kI.required,a.kI.min(0)]],total_cuotas:[null,[a.kI.required,a.kI.min(1)]],notas:[""],fecha:["",[a.kI.required]]})}ngOnInit(){this.aR.params.pipe((0,q.w)(({id:t})=>this.mainService.getCliente(t))).subscribe(t=>this.cliente=t.cliente),this.creditoForm.reset({fecha:h().utc(!0).format("DD/MM/YYYY")}),this.loading=!1}ngOnDestroy(){this.cliente=null,this.loading=!1}crearCredito(){const t={idCliente:this.cliente.id,...this.creditoForm.value};this.creditoForm.valid&&this.mainService.addCredito(t).subscribe(o=>{!0===o?this.router.navigateByUrl("/main/rutero"):console.log(o)})}confirm(t){this.confirmationService.confirm({target:t.target,message:"Desea continuar?",icon:"pi pi-exclamation-triangle",accept:()=>{this.crearCredito()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.F0),e.Y36(p.gz),e.Y36(a.qu),e.Y36(d.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-renovar"]],features:[e._Bn([d.YP])],decls:3,vars:2,consts:[["class","main text-layout flex flex-column",4,"ngIf"],["class","loading",4,"ngIf"],[1,"main","text-layout","flex","flex-column"],[1,"flex","flex-row","justify-content-between","align-items-center"],["pButton","","routerLink","/main/rutero","icon","pi pi-arrow-left",1,"p-button-text","p-button-secondary"],[3,"formGroup","ngSubmit"],[1,"flex","flex-column","gap-2"],["type","number","pInputText","","placeholder","Valor Credito, Ejemplo: 1000","formControlName","valor_credito",3,"min"],[1,"flex","flex-row","gap-1"],["pInputText","","type","number","placeholder","Interes, Ejemplo: 20","formControlName","interes",1,"w-6",3,"min"],["pInputText","","type","number","placeholder","Cuotas, Ejemplo: 20","formControlName","total_cuotas",1,"w-6",3,"min"],["type","text","pInputTextarea","","placeholder","Observaciones","formControlName","notas"],[1,"flex","flex-wrap"],["pButton","","type","submit","label","Ingresar",1,"w-full",3,"disabled"],[1,"loading"]],template:function(t,o){1&t&&(e.YNc(0,Be,16,11,"div",0),e.YNc(1,De,2,0,"div",1),e._UZ(2,"p-confirmPopup")),2&t&&(e.Q6J("ngIf",o.cliente),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[l.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.qQ,a.sg,a.u,p.rH,y.o,f.Hq,C.P,U.g,v.G,l.rS],styles:[".main[_ngcontent-%COMP%]{margin-top:60px}p-toast[_ngcontent-%COMP%]{margin-top:60px!important}.inputs[_ngcontent-%COMP%]{width:100%!important;display:block}.inputs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%}"]}),n})();var I=c(5047);function Ve(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),e._uU(4,"Inversion"),e.qZA()(),e.TgZ(5,"div",5),e._UZ(6,"p-inputNumber",6)(7,"textarea",7),e.TgZ(8,"button",8),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(r))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("formControl",t.valor)("min",0),e.xp6(1),e.Q6J("formControl",t.nota)("autoResize",!0),e.xp6(1),e.Q6J("disabled",t.loading)}}function We(n,i){1&n&&(e.TgZ(0,"div",9),e._UZ(1,"p-progressSpinner"),e.qZA())}let Xe=(()=>{class n{constructor(t,o,r,s){this.confirmationService=t,this.fb=o,this.mainService=r,this.router=s,this.loading=!1,this.valor=this.fb.control(null,[a.kI.required,a.kI.min(0)]),this.nota=this.fb.control("")}ngOnInit(){}crearInversion(){this.loading=!0,this.mainService.addInversion(this.valor.value,this.nota.value).subscribe(t=>{!0===t&&(this.router.navigateByUrl("/main/caja"),this.loading=!1)})}confirm(t){this.valor.valid&&this.confirmationService.confirm({target:t.target,message:"Desea continuar?",icon:"pi pi-exclamation-triangle",accept:()=>{this.crearInversion()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.YP),e.Y36(a.qu),e.Y36(m),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-inversiones"]],features:[e._Bn([d.YP])],decls:3,vars:2,consts:[["class","main flex justify-content-center",4,"ngIf"],["class","loading",4,"ngIf"],[1,"main","flex","justify-content-center"],[1,"card","surface-overlay"],[1,"title"],[1,"body","card-container","flex","flex-column","ustify-content-center","gap-2"],["mode","currency","currency","GTQ","locale","es-GT","placeholder","Ejemplo: Q.30.00",1,"w-full",3,"formControl","min"],["cols","30","rows","5","placeholder","Ejemplo: Inversion por reajuste de caja","pInputTextarea","",3,"formControl","autoResize"],["pButton","","label","Guardar",3,"disabled","click"],[1,"loading"]],template:function(t,o){1&t&&(e.YNc(0,Ve,9,5,"div",0),e.YNc(1,We,2,0,"div",1),e._UZ(2,"p-confirmPopup")),2&t&&(e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[l.O5,a.Fj,a.JJ,a.oH,f.Hq,I.Rn,C.P,U.g,v.G],styles:[".main[_ngcontent-%COMP%]{margin-top:20px}.card[_ngcontent-%COMP%]{background-color:var(--surface-b);border-radius:4px;width:100%;padding:10px}"]}),n})();function Ke(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),e._uU(4,"Gasto"),e.qZA()(),e.TgZ(5,"div",5),e._UZ(6,"p-dropdown",6)(7,"p-inputNumber",7)(8,"textarea",8),e.TgZ(9,"button",9),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(r))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("options",t.gastos)("formControl",t.gasto),e.xp6(1),e.Q6J("formControl",t.valor)("min",0),e.xp6(1),e.Q6J("formControl",t.nota)("autoResize",!0),e.xp6(1),e.Q6J("disabled",t.loading)}}function ze(n,i){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"p-progressSpinner"),e.qZA())}let et=(()=>{class n{constructor(t,o,r,s){this.mainService=t,this.router=o,this.confirmationService=r,this.fb=s,this.gastos=[],this.loading=!1,this.valor=this.fb.control(null,[a.kI.required]),this.gasto=this.fb.control("",[a.kI.required]),this.nota=this.fb.control("")}ngOnInit(){this.mainService.getListaGastos().subscribe(t=>{this.gastos=t})}crearGasto(){this.loading=!0;const t={gasto:this.gasto.value,valor:this.valor.value,nota:this.nota.value,fecha:h().utc(!0).format("DD/MM/YYYY")};this.valor.valid&&this.gasto.valid&&this.mainService.addGasto(t).subscribe(o=>{!0===o?(this.router.navigateByUrl("/main/caja"),this.loading=!1):(console.log(o),this.loading=!1)})}confirm(t){this.valor.valid&&this.gasto.valid&&this.confirmationService.confirm({target:t.target,message:"Desea continuar?",icon:"pi pi-exclamation-triangle",accept:()=>{this.crearGasto()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.F0),e.Y36(d.YP),e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-gastos"]],features:[e._Bn([d.YP])],decls:3,vars:2,consts:[["class","main flex justify-content-center",4,"ngIf"],["class","loading",4,"ngIf"],[1,"main","flex","justify-content-center"],[1,"card","surface-overlay"],[1,"title"],[1,"body","card-container","flex","flex-column","ustify-content-center","gap-2"],["optionValue","id","optionLabel","gasto",3,"options","formControl"],["mode","currency","currency","GTQ","locale","es-GT","placeholder","Ejemplo: Q.30.00",1,"w-full",3,"formControl","min"],["pInputTextarea","","cols","30","rows","5","placeholder","Nota",3,"formControl","autoResize"],["pButton","","label","Guardar",3,"disabled","click"],[1,"loading"]],template:function(t,o){1&t&&(e.YNc(0,Ke,10,7,"div",0),e.YNc(1,ze,2,0,"div",1),e._UZ(2,"p-confirmPopup")),2&t&&(e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[l.O5,a.Fj,a.JJ,a.oH,f.Hq,P.Lt,I.Rn,C.P,U.g,v.G],styles:[".main[_ngcontent-%COMP%]{margin-top:20px}.card[_ngcontent-%COMP%]{background-color:var(--surface-b);border-radius:4px;width:100%;padding:10px}"]}),n})();function tt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),e._uU(4,"Retiro"),e.qZA()(),e.TgZ(5,"div",5),e._UZ(6,"p-inputNumber",6)(7,"textarea",7),e.TgZ(8,"button",8),e.NdJ("click",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.confirm(r))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("formControl",t.valor)("min",0),e.xp6(1),e.Q6J("formControl",t.nota)("autoResize",!0),e.xp6(1),e.Q6J("disabled",t.loading)}}function nt(n,i){1&n&&(e.TgZ(0,"div",9),e._UZ(1,"p-progressSpinner"),e.qZA())}let ot=(()=>{class n{constructor(t,o,r,s){this.fb=t,this.confirmationService=o,this.mainService=r,this.router=s,this.loading=!1,this.valor=this.fb.control(null,[a.kI.required,a.kI.min(0)]),this.nota=this.fb.control("")}ngOnInit(){}crearRetiro(){this.loading=!0,this.valor.valid&&this.mainService.addRetiro(this.valor.value,this.nota.value).subscribe(t=>{!0===t&&(this.router.navigateByUrl("/main/caja"),this.loading=!1)})}confirm(t){this.valor.valid&&this.confirmationService.confirm({target:t.target,message:"Desea continuar?",icon:"pi pi-exclamation-triangle",accept:()=>{this.crearRetiro()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(d.YP),e.Y36(m),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-retiros"]],features:[e._Bn([d.YP])],decls:3,vars:2,consts:[["class","main flex justify-content-center",4,"ngIf"],["class","loading",4,"ngIf"],[1,"main","flex","justify-content-center"],[1,"card","surface-overlay"],[1,"title"],[1,"body","card-container","flex","flex-column","ustify-content-center","gap-2"],["mode","currency","currency","GTQ","locale","es-GT","placeholder","Ejemplo: Q.30.00",1,"w-full",3,"formControl","min"],["cols","30","rows","5","placeholder","Nota","pInputTextarea","",3,"formControl","autoResize"],["pButton","","label","Guardar",3,"disabled","click"],[1,"loading"]],template:function(t,o){1&t&&(e.YNc(0,tt,9,5,"div",0),e.YNc(1,nt,2,0,"div",1),e._UZ(2,"p-confirmPopup")),2&t&&(e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.loading))},dependencies:[l.O5,a.Fj,a.JJ,a.oH,f.Hq,I.Rn,C.P,U.g,v.G],styles:[".main[_ngcontent-%COMP%]{margin-top:20px}.card[_ngcontent-%COMP%]{background-color:var(--surface-b);border-radius:4px;width:100%;padding:10px}"]}),n})();var it=c(7772);const rt=function(){return["/main/verificados"]};function at(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h3"),e._uU(5),e.qZA()(),e.TgZ(6,"div",5),e._UZ(7,"button",6),e.qZA()(),e.TgZ(8,"div")(9,"h3"),e._uU(10),e.ALo(11,"currency"),e.qZA()(),e.TgZ(12,"div",7)(13,"div",8)(14,"div",4),e._uU(15,"Nuevo Pago"),e.qZA(),e.TgZ(16,"div",4),e._UZ(17,"p-inputNumber",9),e.qZA(),e.TgZ(18,"div",4)(19,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.pagar())}),e.qZA()(),e._UZ(20,"p-messages"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.pago.cliente.alias),e.xp6(2),e.Q6J("routerLink",e.DdM(9,rt)),e.xp6(3),e.hij("Pago Actual: ",e.xi3(11,6,t.pago.valor,"GTQ"),""),e.xp6(7),e.Q6J("formControl",t.valor)("showButtons",!0),e.xp6(2),e.Q6J("disabled",t.loading)}}const st=[{path:"",component:R,children:[{path:"rutero",component:se},{path:"renovaciones",component:de},{path:"cliente-nuevo",component:he},{path:"caja",component:Ne},{path:"verificados",component:Ee},{path:"renovar/:id",component:$e},{path:"credito/:id",component:we},{path:"cliente/:id",component:ke},{path:"pago/:id",component:Ye},{path:"pago/editar/:id",component:(()=>{class n{constructor(t,o,r,s,g){this.mainService=t,this.activateRoute=o,this.fb=r,this.messageService=s,this.router=g,this.valor=this.fb.control(0,[a.kI.required,a.kI.min(1)]),this.loading=!1}ngOnInit(){this.activateRoute.params.pipe((0,q.w)(({id:t})=>this.mainService.getPago(t))).subscribe(t=>{this.pago=t.pago})}pagar(){this.messageService.clear(),this.loading=!0,0===this.valor.value&&(console.log("error"),this.messageService.add({severity:"error",summary:"No puede ingresar pago de 0"}),this.loading=!1),this.mainService.updatePago(this.pago.id,this.valor.value).subscribe(t=>{t.ok&&(this.router.navigateByUrl("/main/verificados"),this.loading=!1)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(p.gz),e.Y36(a.qu),e.Y36(d.ez),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-aditar-pago"]],features:[e._Bn([d.ez])],decls:1,vars:1,consts:[["class","card text-layout",4,"ngIf"],[1,"card","text-layout"],[1,"contenedor","p-3","card-container","flex","flex-column","justify-content-center","gap-2"],[1,"header","grid","flex","align-items-center"],[1,"col"],[1,"col","flex","justify-content-end"],["pButton","","icon","pi pi-arrow-left","label","Volver",1,"p-button-danger","p-button-sm","p-button-outlined",3,"routerLink"],[1,"content"],[1,"grid"],["mode","currency","currency","GTQ","locale","es-GT",3,"formControl","showButtons"],["pButton","","label","Pagar",3,"disabled","click"]],template:function(t,o){1&t&&e.YNc(0,at,21,10,"div",0),2&t&&e.Q6J("ngIf",o.pago)},dependencies:[l.O5,a.JJ,a.oH,p.rH,f.Hq,it.V,I.Rn,l.H9],styles:[".contenedor[_ngcontent-%COMP%]{border-radius:5px;border:thin solid gray;background:#1F2D40}"]}),n})()},{path:"oficina",component:Se,children:[{path:"inversiones",component:Xe},{path:"gastos",component:et},{path:"retiros",component:ot},{path:"**",redirectTo:"gastos"}]},{path:"**",redirectTo:"rutero"}]}];let ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(st),p.Bz]}),n})();var lt=c(7507);let pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,a.UX,ct,lt.W]}),n})()}}]);