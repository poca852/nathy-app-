"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[380],{5380:(Y,v,i)=>{i.r(v),i.d(v,{AdminModule:()=>J});var l=i(6895),s=i(5649),a=i(433),Z=i(5226),f=i.n(Z),t=i(8256),c=i(529),T=i(2340),d=i(8505),m=i(4004),h=i(262),A=i(9646);let p=(()=>{class n{constructor(e){this.http=e,this.baseUrl=T.N.baseUrl}get user(){return{...this._user}}login(e){return this.http.post(`${this.baseUrl}/auth/admin/login`,e).pipe((0,d.b)(({token:o})=>{o&&localStorage.setItem("token",o)}),(0,m.U)(o=>o.ok),(0,h.K)(o=>(0,A.of)(o.error.msg)))}revalidarToken(){const e=(new c.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/auth/revalidar/admin`,{headers:e}).pipe((0,d.b)(({token:o,user:u})=>{this._user=u,localStorage.setItem("token",o)}),(0,m.U)(o=>o.ok),(0,h.K)(o=>(0,A.of)(!1)))}logout(){this._user=null,localStorage.clear()}getAllRutaByAdmin(){const e=(new c.WM).set("x-token",localStorage.getItem("token")||"");return this.http.get(`${this.baseUrl}/rutas`,{headers:e})}closeRuta(e){const o=(new c.WM).set("x-token",localStorage.getItem("token")||"");return this.http.patch(`${this.baseUrl}/rutas/close/${e}`,{},{headers:o})}openRuta(e){const o=(new c.WM).set("x-token",localStorage.getItem("token")||"");return this.http.patch(`${this.baseUrl}/rutas/open/${e}`,{},{headers:o})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=i(1740),g=i(5593);let y=(()=>{class n{constructor(e,o,u){this.fb=e,this.router=o,this.adminService=u,this.formLogin=this.fb.group({username:["",a.kI.required],password:["",a.kI.required]}),this.loading=!1}ngOnInit(){}login(){if(this.loading=!0,this.formLogin.invalid)return f().fire("Error","Por favor Ingresa los datos","error"),void(this.loading=!1);this.adminService.login(this.formLogin.value).subscribe(e=>{!0===e?(this.router.navigateByUrl("/admin/home"),this.loading=!1):(f().fire("Error",e,"error"),this.loading=!1)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(s.F0),t.Y36(p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:11,vars:2,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["type","text","pInputText","","formControlName","username","placeholder","Usuario"],[1,"pi","pi-key"],["type","password","pInputText","","formControlName","password","placeholder","Contrase\xf1a"],["pButton","","label","Ingresar","type","submit",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.login()}),t.TgZ(2,"div",2)(3,"span",3),t._UZ(4,"i",4),t.qZA(),t._UZ(5,"input",5),t.qZA(),t.TgZ(6,"div",2)(7,"span",3),t._UZ(8,"i",6),t.qZA(),t._UZ(9,"input",7),t.qZA(),t._UZ(10,"button",8),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.formLogin),t.xp6(9),t.Q6J("disabled",o.loading))},dependencies:[b.o,g.Hq,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-top:100px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{border:thin solid white;border-radius:5px;gap:10px;padding:20px;display:flex;flex-direction:column;width:300px}@media screen and (max-width: 960px){.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:200px}}"]}),n})();var C=i(3214),U=i(1383);const x=function(){return{position:"fixed",right:0,left:0,top:0}};let S=(()=>{class n{constructor(e,o){this.adminService=e,this.router=o,this.openMenu=!1}ngOnInit(){}logout(){this.adminService.logout(),this.router.navigateByUrl("/admin/login")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p),t.Y36(s.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:10,vars:4,consts:[[3,"ngStyle"],[1,"p-toolbar-group-left"],["pButton","","icon","pi pi-bars",1,"p-button-outlined",3,"click"],[1,"p-toolbar-group-right"],["pButton","","icon","pi pi-power-off",1,"p-button-danger",3,"click"],[3,"visible","baseZIndex","visibleChange"],[1,"contenedor"]],template:function(e,o){1&e&&(t.TgZ(0,"p-toolbar",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.openMenu=!o.openMenu}),t.qZA()(),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return o.logout()}),t.qZA()()(),t.TgZ(5,"p-sidebar",5),t.NdJ("visibleChange",function(B){return o.openMenu=B}),t.TgZ(6,"h3"),t._uU(7,"Left Sidebar"),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"router-outlet"),t.qZA()),2&e&&(t.Q6J("ngStyle",t.DdM(3,x)),t.xp6(5),t.Q6J("visible",o.openMenu)("baseZIndex",1e4))},dependencies:[l.PC,s.lC,g.Hq,C.Y,U.o],styles:[".contenedor[_ngcontent-%COMP%]{margin-top:80px}"]}),n})(),L=(()=>{class n{constructor(e,o){this.router=e,this.adminService=o}canActivate(){return this.adminService.revalidarToken().pipe((0,d.b)(e=>{e||this.router.navigateByUrl("/admin/login")}))}canLoad(){return this.adminService.revalidarToken().pipe((0,d.b)(e=>{e||this.router.navigateByUrl("/admin/login")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(s.F0),t.LFG(p))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R=(()=>{class n{constructor(e,o){this.router=e,this.adminService=o}canActivate(){return this.adminService.revalidarToken().pipe((0,d.b)(e=>{e&&this.router.navigateByUrl("/admin/home")}),(0,m.U)(e=>!e))}canLoad(){return this.adminService.revalidarToken().pipe((0,d.b)(e=>{e||this.router.navigateByUrl("/admin/home")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(s.F0),t.LFG(p))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var q=i(5108);let F=(()=>{class n{constructor(e){this.adminService=e}ngOnInit(){}closeRuta(){this.adminService.closeRuta(this.ruta.id).subscribe(e=>{!0===e.ok&&window.location.reload()})}openRuta(){this.adminService.openRuta(this.ruta.id).subscribe(e=>{!0===e.ok&&window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-panel-ruta"]],inputs:{ruta:"ruta"},decls:54,vars:29,consts:[[1,"card","text-layout"],[1,"flex","flex-column","border-1","p-1"],[1,"header","flex","flex-row","justify-content-between"],["pButton","",1,"p-button-text",3,"ngClass","label","click"],[1,"content"],[1,"grid"],[1,"col","flex","justify-content-end"],[1,"col","flex","justify-content-start"],[1,"col","flex","jusitfy-content-start"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.ruta.status?o.closeRuta():o.openRuta()}),t.qZA()(),t._UZ(6,"p-divider"),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._uU(10,"Cartera"),t.qZA(),t.TgZ(11,"div",7),t._uU(12),t.ALo(13,"currency"),t.qZA()(),t.TgZ(14,"div",5)(15,"div",6),t._uU(16,"Clientes"),t.qZA(),t.TgZ(17,"div",8),t._uU(18),t.qZA()(),t.TgZ(19,"div",5)(20,"div",6),t._uU(21,"Gastos"),t.qZA(),t.TgZ(22,"div",8),t._uU(23),t.ALo(24,"currency"),t.qZA()(),t.TgZ(25,"div",5)(26,"div",6),t._uU(27,"Inversiones"),t.qZA(),t.TgZ(28,"div",8),t._uU(29),t.ALo(30,"currency"),t.qZA()(),t.TgZ(31,"div",5)(32,"div",6),t._uU(33,"Retiros"),t.qZA(),t.TgZ(34,"div",8),t._uU(35),t.ALo(36,"currency"),t.qZA()(),t.TgZ(37,"div",5)(38,"div",6),t._uU(39,"Total Recaudado"),t.qZA(),t.TgZ(40,"div",8),t._uU(41),t.ALo(42,"currency"),t.qZA()(),t.TgZ(43,"div",5)(44,"div",6),t._uU(45,"Total Prestado"),t.qZA(),t.TgZ(46,"div",8),t._uU(47),t.ALo(48,"currency"),t.qZA()(),t.TgZ(49,"div",5)(50,"div",6),t._uU(51,"Estado"),t.qZA(),t.TgZ(52,"div",8),t._uU(53),t.qZA()()()()()),2&e&&(t.xp6(4),t.Oqu(o.ruta.nombre),t.xp6(1),t.Q6J("ngClass",o.ruta.status?"p-button-danger":"p-button-success")("label",o.ruta.status?"Cerrar":"Abrir"),t.xp6(7),t.Oqu(t.xi3(13,11,o.ruta.cartera,"GTQ")),t.xp6(6),t.Oqu(o.ruta.clientes),t.xp6(5),t.Oqu(t.xi3(24,14,o.ruta.gastos,"GTQ")),t.xp6(6),t.Oqu(t.xi3(30,17,o.ruta.inversiones,"GTQ")),t.xp6(6),t.Oqu(t.xi3(36,20,o.ruta.retiros,"GTQ")),t.xp6(6),t.Oqu(t.xi3(42,23,o.ruta.total_cobrado,"GTQ")),t.xp6(6),t.Oqu(t.xi3(48,26,o.ruta.total_prestado,"GTQ")),t.xp6(6),t.Oqu(o.ruta.status?"Abierta":"Cerrada"))},dependencies:[l.mk,g.Hq,q.i,l.H9]}),n})();function I(n,r){1&n&&t._UZ(0,"app-panel-ruta",4),2&n&&t.Q6J("ruta",r.$implicit)}function M(n,r){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,I,1,1,"app-panel-ruta",3),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.rutas)}}const O=[{path:"login",component:y,canActivate:[R]},{path:"home",component:S,canActivate:[L],children:[{path:"resumen",component:(()=>{class n{constructor(e,o){this.adminService=e,this.router=o,this.rutas=[],this.loading=!0}get user(){return{...this.adminService.user}}ngOnInit(){this.adminService.getAllRutaByAdmin().subscribe(e=>{this.rutas=e.rutas,this.loading=!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p),t.Y36(s.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-resumen"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"flex","flex-column","gap-2"],[3,"ruta",4,"ngFor","ngForOf"],[3,"ruta"]],template:function(e,o){1&e&&t.YNc(0,M,3,1,"div",0),2&e&&t.Q6J("ngIf",!o.loading)},dependencies:[l.sg,l.O5,F]}),n})()},{path:"**",redirectTo:"resumen"}]},{path:"**",redirectTo:"login"}];let G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.Bz.forChild(O),s.Bz]}),n})();var k=i(7507);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,G,k.W,a.UX]}),n})()}}]);